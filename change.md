### 1. 修改 `prompts/steps.py`：解除对判据和逻辑深度的封锁

 **目标** ：允许题干包含完整的判断标准（阈值表），并允许复杂的链式逻辑，从而消除“模棱两可”并提升难度。

请在 `build_graph_1hop_step_prompt`（以及 `build_stage2_step_prompt` 等类似函数）中找到以下 **“信息约束”** 部分并进行替换。

**修改建议 (Refined Code):**

**Python**

```
        - 信息约束：
          - **必须完整保留解题所需的判据**：若题目要求根据计算结果判定等级（如偏离度等级、安全等级），**必须在题干中明确列出具体的数值阈值表**（例如：“规定：F < 1.0 为低估，1.0 ≤ F < 1.1 为正常，F ≥ 1.1 为高估”），严禁使用“按文中规定”这种模糊表述代替具体数值。
          - **支持链式推理**：允许描述 A -> B -> C 的多步推导逻辑。不要为了简化而牺牲逻辑的严密性。如果需要先计算中间变量再查表，请完整描述这一过程。
          - **自包含性**：题目必须包含所有必要的常量定义和公式，确保读者仅凭题干和图片即可得出唯一确定的答案，无需“猜测”文中的隐藏设定。
```

 **效果预期** ：
修改后，生成的题目将不再出现“偏离等级最接近哪一项”却不给范围的情况，而是会明确给出 `[0.9, 1.05)` 等具体区间，使题目从“猜谜”变为严谨的“计算+查表”题。

---

### 2. 修改 `prompts/obfuscate.py`：保留关键计算数据

 **目标** ：防止“去词汇化”过程误删了解题必须的视觉读数（Visual Readings），导致计算题无法下手或变得模糊。

请修改 `build_obfuscate_prompt` 函数中的提示词。

**修改建议 (Refined Code):**

**Python**

```
        - **精准保留计算锚点**：对于计算类题目，**必须保留**图片中关键的视觉读数、刻度、比例或特定状态的描述（例如“图中仪表盘显示约为 2.4”或“红色区域占比约 1/4”）。**严禁泛化**这些解题必须的数值输入，否则题目将不可解。
        - **仅泛化装饰性细节**：只删除与解题逻辑无关的背景描述（如图片的具体的拍摄角度、无关的颜色细节）。
        - **客观化陈述**：彻底删除所有来源指代词（如“按文中”、“据资料”），直接陈述规则（例如：“已知判定规则为：当 X > 5 时...”）。
```

---

### 3. 进阶建议：在 `steps.py` 中引入“多步推理”模板

 **目标** ：强制模型生产“难题”，而不仅仅是单跳（1-hop）题。

建议在 `build_graph_1hop_step_prompt` 函数的 prompt 模板中，在“要求”部分增加以下指令：

**添加内容 (Add to Prompt):**

**Python**

```
        - 难度提升策略（Hardness Booster）：
          - 禁止直接询问图中显而易见的信息。
          - **必须构造合成推理**：题目应要求读者结合“视觉读数”与“题干给出的复杂规则”进行运算。
          - 示例逻辑：不要问“图中数值是多少？”，要问“若图中的数值代表输入 I，且输出 O = I² + C（C=5），则系统状态处于哪个区间？”
          - 干扰项设计：必须包含“中间计算错误”或“临界值判断错误”导致的常见错误选项（Hard Negatives）。
```
